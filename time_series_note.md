# 時間序列（Time Series）

#### 目錄
1. [時間序列大方向](#時間序列大方向)
   - [第一部分：時間序列的基本概念](#第一部分時間序列的基本概念)
   - [第二部分：時間序列的分析方法](#第二部分時間序列的分析方法15-小時)
   - [第三部分：時間序列的應用案例](#第三部分時間序列的應用案例1-小時)



***
# 時間序列大方向

***

### **第一部分：時間序列的基本概念**
#### **什麼是時間序列？**
- 由時間順序排列的數據，如每日氣溫、股價、心率數據等
- 與普通數據的最大不同點：時間相關性（Temporal Dependence）
> 比起普通數據，時間序列的data把「時間」當成重要feature
> 時間戳記需有**順序**與**間隔**

#### **時間序列的主要特性**
1. **趨勢（Trend）**：數據長期上升或下降，例如全球氣溫上升。
2. **季節性（Seasonality）**：固定時間週期內的重複模式，例如聖誕節銷售量增加。
3. **循環模式（Cyclic Patterns）**：不像季節性那麼固定，但仍有規律，例如經濟週期。
4. **隨機性（Randomness）**：無法預測的變化，例如突發股市暴跌。

#### **時間序列的應用領域**
- 金融：股價預測、風險管理
- 製造業：機器故障預測、產線品質監測
- 醫療：心電圖分析、疾病趨勢預測
- 氣象：天氣預測、降雨量分析
- 供應鏈：需求預測、物流最佳化

---

### **第二部分：時間序列的分析方法**
#### **如何表示時間序列？**
| 概念 | 格式 | 說明與場景 |
|------|------|------------|
| **時間戳記 (Timestamps)** | 2023-11-15T14:30:25.500Z | 精確到秒、毫秒的時間點，常用於高頻數據（如股票交易、感測器數據） |
| **日期格式 (Date Formats)** | YYYY-MM-DD、DD/MM/YYYY | 不同地區有不同表示法，需標準化處理以確保一致性 |
| **頻率 (Frequency)** | 每日、每小時、每分鐘 | 數據收集的時間間隔，影響分析方法選擇 |
| **時間尺度 (Time Scale)** | 日、週、月、季、年 | 根據分析目的可能需要不同尺度的聚合 |

**平穩性 (Stationarity)**：如果數據的統計特性（均值、變異數）隨時間變化，就需要**轉換**或**差分**處理來讓數據平穩。
#### **時間序列的統計方法與Python實現**
| 方法 | 說明 | 適用場景 | Python庫 | 公式解釋 |
|------|------|----------|---------|------|
| **移動平均（Moving Average, MA）** | 用來平滑數據，消除短期波動 | 數據有噪音，需要觀察整體趨勢 | `pandas.DataFrame.rolling()`, `statsmodels.tsa.arima.model` | MA模型使用過去幾期的誤差項（預測誤差）的加權平均來預測。<br>參數$q$表示考慮的誤差項數量。 |
| **自回歸（AutoRegression, AR）** | 使用過去數據預測未來值 | 當前值與過去值有明顯相關性 | `statsmodels.tsa.ar_model.AutoReg` | AR模型使用過去幾期的觀測值來預測當前值。參數$p$表示考慮的歷史觀測值數量。 |
| **ARIMA（自回歸移動平均整合模型）** | 結合 AR、MA 和差分（Differencing）來預測未來 | 非平穩時間序列，有趨勢性數據 | `statsmodels.tsa.arima.model.ARIMA`, `pmdarima.auto_arima` | ARIMA模型結合了AR和MA，並加入差分處理。
| **指數平滑（Exponential Smoothing）** | 適合趨勢和季節性數據，如 Holt-Winters 方法 | 具有趨勢和季節性的數據預測 | `statsmodels.tsa.holtwinters.ExponentialSmoothing` | 給予近期數據更高權重的平滑方法。<br>參數$\alpha$控制平滑程度，<br>$\beta$控制趨勢，<br>$\gamma$控制季節性。 |

#### **時間序列與機器學習**
- **傳統機器學習（Random Forest, XGBoost）**：需要手動創建時間相關特徵
- **深度學習（LSTM, Transformer）**：適合處理**長期依賴**的數據，如自然語言、感測器數據

#### **時間序列的主要分析方法比較**
| 方法 | 類型 | 優勢 | 適用場景 | Python庫 |
|------|------|------|----------|----------|
| **ARIMA** | 傳統統計方法 | • 理論基礎紮實<br>• 可解釋性強<br>• 計算資源需求低 | • 較短期的預測<br>• 數據相對平穩或能通過差分處理達到平穩<br>• 數據量較小的情況 | `statsmodels.tsa.arima.model.ARIMA`<br>`pmdarima.auto_arima` |
| **Prophet** | Facebook開發的時間序列工具 | • 自動處理季節性和節假日效應<br>• 對異常值較為穩健<br>• 使用簡單，參數調整少 | • 具有明顯日/週/年季節性的業務數據<br>• 銷售、網站流量、業務指標預測<br>• 有節假日效應的數據 | `prophet`<br>`fbprophet` |
| **LSTM** | 深度學習方法 | • 能夠捕捉複雜的非線性模式<br>• 處理長期依賴關係<br>• 可整合多種特徵 | • 大量數據<br>• 複雜模式<br>• 較長期依賴關係的時間序列<br>• 多變量預測 | `tensorflow.keras.layers.LSTM`<br>`torch.nn.LSTM` |



#### **AI 在時間序列的最新發展**
| 技術 | 說明 | 應用領域 |
|------|------|----------|
| **Transformer 模型** | 正在取代 LSTM，應用於更高效的時間序列預測 | 自然語言處理、金融預測 |
| **AutoML（自動機器學習）** | 讓時間序列分析更容易使用 | 企業分析、數據科學自動化 |
| **即時預測（Real-Time Forecasting）** | 在金融和供應鏈領域越來越重要 | 金融交易、供應鏈管理 |


**學習時間序列的下一步**
- 如果想深入學習，可以從統計方法（ARIMA）、機器學習（XGBoost）、深度學習（LSTM）開始
- 可以參考書籍：
  - *Forecasting: Principles and Practice*（一本免費的時間序列預測書）
  - *Deep Learning for Time Series Forecasting*（深度學習在時間序列的應用）

---
### **第三部分：時間序列分析的關鍵結論**

#### **選擇合適的方法**
| 情境 | 建議方法 | 考量因素 |
|------|----------|----------|
| **短期預測、數據量小** | ARIMA、指數平滑 | 計算效率高、理論基礎紮實 |
| **有明顯季節性** | Prophet、季節性ARIMA | 自動處理季節性、節假日效應 |
| **複雜非線性關係** | LSTM、Transformer | 需要大量數據、計算資源 |
| **多變量預測** | VAR、深度學習模型 | 考慮變量間相互影響 |

#### **實務應用要點**
1. **數據前處理至關重要**
   - 缺失值處理、異常檢測、平穩性轉換
   - 特徵工程（如時間特徵提取）

2. **評估指標選擇**
   - 預測準確度：MAE、RMSE、MAPE
   - 模型複雜度與可解釋性的平衡

3. **實際應用考量**
   - 預測區間而非點估計
   - 定期重新訓練模型以適應新數據
   - 結合領域知識提高預測質量

#### **常見挑戰與解決方案**
| 挑戰 | 解決方案 |
|------|----------|
| **數據不平穩** | 差分、對數轉換、去趨勢 |
| **季節性變化** | 季節性分解、季節性調整 |
| **異常值影響** | 穩健統計方法、異常檢測算法 |
| **預測不確定性** | 預測區間、情境分析 |

#### **未來趨勢**
- **混合模型**：結合統計方法與深度學習的優勢
- **可解釋AI**：增強時間序列模型的可解釋性
- **聯邦學習**：在保護隱私的前提下進行分散式時間序列分析
- **自監督學習**：利用未標記數據提高模型性能
